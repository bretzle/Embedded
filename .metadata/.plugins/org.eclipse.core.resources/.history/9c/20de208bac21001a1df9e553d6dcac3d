#include "timing.h"
#include <inttypes.h>
#include <stdio.h>
#include <string.h>

void enable_GPIO(char);

void lcd_init(void) {
	enable_GPIO('B');
	init_PB0_to_PB2_mode();

	enable_GPIO('C');
	init_PC8_to_PC11_mode();

	lcd_set_up();
}

void enable_GPIO(char port) {
	volatile uint32_t* rcc_ahb1enr = (uint32_t*) 0x40023830;

	switch (port) {
	case 'A':
		*rcc_ahb1enr |= (1 << 0);
		break;
	case 'B':
		*rcc_ahb1enr |= (1 << 1);
		break;
	case 'C':
		*rcc_ahb1enr |= (1 << 2);
		break;
	case 'D':
		*rcc_ahb1enr |= (1 << 3);
		break;
	case 'E':
		*rcc_ahb1enr |= (1 << 4);
		break;
	case 'F':
		*rcc_ahb1enr |= (1 << 5);
		break;
	case 'G':
		*rcc_ahb1enr |= (1 << 6);
		break;
	case 'H':
		*rcc_ahb1enr |= (1 << 7);
		break;
	}
}


void init_PB0_to_PB2_mode() {
	volatile uint32_t* gpiob_base;
	gpiob_base = (uint32_t*) GPIOB_BASE;
	for (int bit = 0; bit < 3; bit++) {
		gpiob_base[MODER] &= ~(0b11 << (bit * 2)); // make sure all bits are set to zero.
		gpiob_base[MODER] |= OUTPUT << (bit * 2); // set mode from PB0 to PB2 to output mode.
	}
}


void init_PC8_to_PC11_mode() {
	volatile uint32_t* gpioc_base;
	gpioc_base = (uint32_t*) GPIOC_BASE;
	for (int bit = 8; bit < 12; bit++) {
		gpioc_base[MODER] &= ~(0b11 << (bit * 2)); // make sure all bits are set to zero.
		gpioc_base[MODER] |= OUTPUT << (bit * 2); // set mode from PC7 to PC11 to output mode.
	}
}












void lcd_clear(void) {

}

void lcd_home(void) {

}

void lcd_set_position(int row, int col) {

}

void lcd_print_string(char *string[]) {

}

void lcd_print_num(int number) {

}
